<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xá»• Sá»‘ LÃ¬ XÃ¬ 2025 ğŸ§§</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --red: #dc2626; --gold: #fbbf24;
            --dark-red: #991b1b; --light-gold: #fef3c7;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #450a0a 0%, #7f1d1d 50%, #450a0a 100%);
            min-height: 100vh;
            display: flex; justify-content: center; align-items: center;
            overflow-x: hidden; position: relative;
        }
        body::before {
            content: '';
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(251,191,36,0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(220,38,38,0.1) 0%, transparent 50%);
            pointer-events: none; z-index: 0;
            animation: pulse 4s ease-in-out infinite;
        }
        @keyframes pulse { 0%,100%{opacity:.5} 50%{opacity:1} }

        .container {
            position: relative; z-index: 1;
            text-align: center; padding: 40px 20px;
            max-width: 600px; width: 100%;
        }
        .header { margin-bottom: 50px; animation: fadeInDown 1s ease; }
        @keyframes fadeInDown {
            from{opacity:0;transform:translateY(-30px)} to{opacity:1;transform:translateY(0)}
        }
        .title {
            font-size: 3rem; font-weight: 900;
            background: linear-gradient(135deg, var(--gold) 0%, #fff 50%, var(--gold) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text; margin-bottom: 15px;
            animation: glow 2s ease-in-out infinite;
        }
        @keyframes glow {
            0%,100%{filter:brightness(1) drop-shadow(0 0 20px rgba(251,191,36,.6))}
            50%{filter:brightness(1.3) drop-shadow(0 0 40px rgba(251,191,36,.9))}
        }
        .subtitle { font-size: 1.2rem; color: var(--light-gold); font-weight: 500; }

        .envelope-card {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            border-radius: 30px; padding: 50px 40px;
            border: 4px solid var(--gold);
            box-shadow: 0 30px 80px rgba(0,0,0,.5), 0 0 50px rgba(251,191,36,.3);
            position: relative; overflow: hidden;
            animation: slideUp 1s ease;
        }
        @keyframes slideUp {
            from{opacity:0;transform:translateY(50px) scale(.9)} to{opacity:1;transform:translateY(0) scale(1)}
        }
        .envelope-card::before {
            content: ''; position: absolute; top:-50%; left:-50%; width:200%; height:200%;
            background: linear-gradient(45deg, transparent, rgba(251,191,36,.1), transparent);
            animation: shine 3s linear infinite;
        }
        @keyframes shine { from{transform:rotate(0deg)} to{transform:rotate(360deg)} }

        .envelope-icon {
            font-size: 8rem; margin-bottom: 20px;
            display: inline-block; position: relative; z-index: 1;
            cursor: pointer; transition: transform .3s;
        }
        .envelope-icon.shake { animation: shake .5s ease; }
        @keyframes shake {
            0%,100%{transform:translateX(0) rotate(0deg)}
            25%{transform:translateX(-10px) rotate(-10deg)}
            75%{transform:translateX(10px) rotate(10deg)}
        }
        .envelope-icon.open { animation: openEnvelope 1s ease forwards; }
        @keyframes openEnvelope {
            0%{transform:scale(1) rotate(0deg)}
            50%{transform:scale(1.3) rotate(360deg)}
            100%{transform:scale(0) rotate(720deg)}
        }

        .draw-button {
            padding: 20px 60px; font-size: 1.5rem; font-weight: 700;
            background: linear-gradient(135deg, var(--gold) 0%, #f59e0b 100%);
            color: var(--dark-red); border: none; border-radius: 50px;
            cursor: pointer; transition: all .3s;
            box-shadow: 0 10px 40px rgba(251,191,36,.5);
            position: relative; z-index: 1; margin-top: 20px;
        }
        .draw-button:hover { transform: translateY(-5px) scale(1.05); box-shadow: 0 15px 50px rgba(251,191,36,.7); }
        .draw-button:active { transform: translateY(-2px) scale(1.02); }
        .draw-button.drawing { animation: pulse .5s ease-in-out infinite; pointer-events: none; }
        .draw-button.hidden { opacity: 0; pointer-events: none; transform: scale(0); }

        /* â”€â”€ ALREADY PLAYED BANNER â”€â”€ */
        .used-banner {
            display: none;
            background: rgba(0,0,0,.4);
            border: 2px solid rgba(251,191,36,.5);
            border-radius: 20px;
            padding: 30px 20px;
            position: relative; z-index: 1;
        }
        .used-banner.show { display: block; animation: fadeIn 1s ease; }
        .used-banner h2 { color: var(--gold); font-size: 1.8rem; margin-bottom: 10px; }
        .used-banner p  { color: #fff; font-size: 1.1rem; line-height: 1.7; }
        .used-amount    { color: var(--gold); font-weight: 900; font-size: 1.4rem; }

        .result-container {
            position: relative; z-index: 1;
            opacity: 0; transform: scale(0); transition: all .5s;
        }
        .result-container.show { opacity: 1; transform: scale(1); }

        .amount-display {
            font-size: 5rem; font-weight: 900;
            background: linear-gradient(135deg, var(--gold) 0%, #fff 50%, var(--gold) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text; margin-bottom: 20px;
            animation: popIn .8s cubic-bezier(.34,1.56,.64,1);
        }
        @keyframes popIn {
            0%{opacity:0;transform:scale(0) rotate(-180deg)}
            100%{opacity:1;transform:scale(1) rotate(0deg)}
        }
        .currency { font-size: 2rem; color: var(--light-gold); font-weight: 600; }

        .wish-box {
            background: rgba(255,255,255,.1);
            backdrop-filter: blur(10px);
            border-radius: 20px; padding: 25px; margin: 30px 0;
            border: 2px solid rgba(251,191,36,.3);
            animation: fadeIn 1s ease .5s both;
        }
        @keyframes fadeIn { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }

        .wish-emoji {
            font-size: 3rem; margin-bottom: 15px;
            display: inline-block;
            animation: bounce 1s ease-in-out infinite;
        }
        @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-15px)} }
        .wish-text { font-size: 1.3rem; color: white; line-height: 1.8; font-weight: 600; }

        .momo-btn {
            padding: 15px 40px; font-size: 1.1rem; font-weight: 700;
            background: linear-gradient(135deg, #a91079 0%, #d71e7e 100%);
            color: white; border: none; border-radius: 50px; cursor: pointer;
            transition: all .3s; box-shadow: 0 10px 30px rgba(169,16,121,.5);
            margin-top: 15px; display: inline-block; text-decoration: none;
        }
        .momo-btn:hover { transform: translateY(-3px); box-shadow: 0 15px 40px rgba(169,16,121,.7); }

        .confetti {
            position: fixed; width: 10px; height: 10px; z-index: 999;
            animation: confetti-fall 3s linear forwards;
        }
        @keyframes confetti-fall { to{transform:translateY(100vh) rotate(360deg);opacity:0} }

        .particle { position: fixed; width: 8px; height: 8px; border-radius: 50%; pointer-events: none; z-index: 998; }

        @media(max-width:768px){
            .title{font-size:2.5rem}
            .envelope-card{padding:40px 25px}
            .envelope-icon{font-size:6rem}
            .amount-display{font-size:3.5rem}
            .draw-button{padding:18px 50px;font-size:1.3rem}
            .wish-text{font-size:1.1rem}
        }
        @media(max-width:480px){
            .title{font-size:2rem}
            .subtitle{font-size:1rem}
            .envelope-icon{font-size:5rem}
            .amount-display{font-size:2.8rem}
            .draw-button{padding:15px 40px;font-size:1.1rem}
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1 class="title">ğŸŠ Xá»” Sá» LÃŒ XÃŒ 2025 ğŸŠ</h1>
        <p class="subtitle">Thá»­ váº­n may cá»§a báº¡n! Nháº­n tá»« 10.000 â€“ 50.000 VNÄ</p>
    </div>

    <div class="envelope-card">
        <div id="envelopeIcon" class="envelope-icon">ğŸ§§</div>

        <!-- NÃºt quay -->
        <button id="drawButton" class="draw-button" onclick="drawLuckyMoney()">
            ğŸ² Má» LÃŒ XÃŒ NGAY ğŸ²
        </button>

        <!-- ÄÃ£ quay rá»“i -->
        <div id="usedBanner" class="used-banner">
            <h2>ğŸ”’ Báº¡n Ä‘Ã£ quay rá»“i!</h2>
            <p>Má»—i thiáº¿t bá»‹ chá»‰ Ä‘Æ°á»£c quay <strong>1 láº§n duy nháº¥t</strong>.<br>
               Láº§n trÆ°á»›c báº¡n nháº­n Ä‘Æ°á»£c:<br>
               <span id="usedAmount" class="used-amount"></span>
            </p>
            <br>
            <a href="https://me.momo.vn/pwI4TzsqfDCduxUgfQFeiN" target="_blank" class="momo-btn">
                ğŸ“± Gá»­i LÃ¬ XÃ¬ Qua MoMo
            </a>
        </div>

        <!-- Káº¿t quáº£ -->
        <div id="resultContainer" class="result-container">
            <div id="amountDisplay" class="amount-display">
                <span id="amount">0</span>
                <span class="currency">VNÄ</span>
            </div>
            <div class="wish-box">
                <div id="wishEmoji" class="wish-emoji">ğŸ‰</div>
                <div id="wishText" class="wish-text">ChÃºc má»«ng báº¡n!</div>
            </div>
            <a href="https://me.momo.vn/pwI4TzsqfDCduxUgfQFeiN" target="_blank" class="momo-btn">
                ğŸ“± Gá»­i LÃ¬ XÃ¬ Qua MoMo
            </a>
        </div>
    </div>
</div>

<script>
    // â”€â”€â”€ STORAGE KEY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const STORAGE_KEY = 'lixi_2025_result';

    // â”€â”€â”€ WISHES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const WISHES = {
        10000: { emoji: 'â˜•', text: 'Má»™t ly cÃ  phÃª Ä‘á»ƒ báº¯t Ä‘áº§u ngÃ y má»›i trÃ n Ä‘áº§y nÄƒng lÆ°á»£ng! ChÃºc báº¡n luÃ´n tá»‰nh tÃ¡o vÃ  lÃ m viá»‡c hiá»‡u quáº£!' },
        20000: { emoji: 'ğŸœ', text: 'Äá»§ tiá»n Äƒn má»™t bá»¯a phá»Ÿ ngon lÃ nh! ChÃºc báº¡n nÄƒm má»›i Äƒn gÃ¬ cÅ©ng ngon miá»‡ng, sá»©c khá»e dá»“i dÃ o!' },
        30000: { emoji: 'ğŸ®', text: 'Mua Ä‘Æ°á»£c vÃ i item game xá»‹n rá»“i Ä‘Ã¢y! ChÃºc báº¡n chÆ¡i game luÃ´n win streak, rank leo vÃ¹n vá»¥t!' },
        50000: { emoji: 'ğŸ’°', text: 'Wow! Sá»‘ tiá»n khÃ¡ á»•n Ä‘áº¥y! ChÃºc báº¡n nÄƒm má»›i tÃ i lá»™c dá»“i dÃ o, tiá»n báº¡c lÃºc nÃ o cÅ©ng rá»§ng rá»‰nh!' }
    };

    // â”€â”€â”€ KIá»‚M TRA ÄÃƒ QUAY CHÆ¯A KHI Táº¢I TRANG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    window.addEventListener('load', () => {
        launchInitialConfetti();

        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
            const { amount } = JSON.parse(saved);
            // áº¨n nÃºt, áº©n icon, hiá»‡n banner "Ä‘Ã£ quay"
            document.getElementById('drawButton').classList.add('hidden');
            document.getElementById('envelopeIcon').style.opacity = '0';
            document.getElementById('usedAmount').textContent =
                Number(amount).toLocaleString('vi-VN') + ' VNÄ';
            document.getElementById('usedBanner').classList.add('show');
        }
    });

    // â”€â”€â”€ QUAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function drawLuckyMoney() {
        // Double-check: náº¿u Ä‘Ã£ quay (race condition / double click)
        if (localStorage.getItem(STORAGE_KEY)) return;

        const button   = document.getElementById('drawButton');
        const envelope = document.getElementById('envelopeIcon');
        const result   = document.getElementById('resultContainer');

        button.classList.add('drawing');
        envelope.classList.add('shake');

        setTimeout(() => {
            envelope.classList.remove('shake');
            envelope.classList.add('open');
        }, 500);

        // Weighted random: 10k=45%, 20k=45%, 30k=7%, 50k=3%
        const weighted = [
            ...Array(45).fill(10000),
            ...Array(45).fill(20000),
            ...Array(7).fill(30000),
            ...Array(3).fill(50000),
        ];
        const randomAmount = weighted[Math.floor(Math.random() * weighted.length)];

        // â”€â”€ LÆ¯U NGAY VÃ€O localStorage trÆ°á»›c khi hiá»ƒn thá»‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        localStorage.setItem(STORAGE_KEY, JSON.stringify({ amount: randomAmount, ts: Date.now() }));

        setTimeout(() => {
            button.classList.add('hidden');
            envelope.style.opacity = '0';
            result.classList.add('show');
            animateCounter(randomAmount);
            createFireworkExplosion();
            createConfettiBurst();
        }, 1500);
    }

    // â”€â”€â”€ COUNTER ANIMATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function animateCounter(finalAmount) {
        const el       = document.getElementById('amount');
        const emoji    = document.getElementById('wishEmoji');
        const wishText = document.getElementById('wishText');

        let current = 0;
        const steps    = 50;
        const inc      = finalAmount / steps;
        const stepTime = 1500 / steps;

        const timer = setInterval(() => {
            current += inc;
            if (current >= finalAmount) {
                current = finalAmount;
                clearInterval(timer);
                const wish = WISHES[finalAmount];
                emoji.textContent    = wish.emoji;
                wishText.textContent = wish.text;
            }
            el.textContent = Math.floor(current).toLocaleString('vi-VN');
        }, stepTime);
    }

    // â”€â”€â”€ FIREWORK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function createFireworkExplosion() {
        const colors = ['#fbbf24','#dc2626','#fff','#f59e0b','#fef3c7'];
        for (let i = 0; i < 50; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.background = colors[Math.floor(Math.random() * colors.length)];
            p.style.left = '50%'; p.style.top = '50%';
            const angle = (Math.PI * 2 * i) / 50;
            const vel   = 150 + Math.random() * 150;
            p.style.setProperty('--tx', Math.cos(angle) * vel + 'px');
            p.style.setProperty('--ty', Math.sin(angle) * vel + 'px');
            p.style.animation = 'explode 1s ease-out forwards';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 1000);
        }
    }

    // â”€â”€â”€ CONFETTI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function createConfettiBurst() {
        const colors = ['#fbbf24','#dc2626','#fff','#f59e0b','#fef3c7'];
        for (let i = 0; i < 100; i++) {
            setTimeout(() => {
                const c = document.createElement('div');
                c.className = 'confetti';
                c.style.left       = Math.random() * 100 + '%';
                c.style.top        = '-10px';
                c.style.background = colors[Math.floor(Math.random() * colors.length)];
                c.style.transform  = `rotate(${Math.random() * 360}deg)`;
                document.body.appendChild(c);
                setTimeout(() => c.remove(), 3000);
            }, i * 30);
        }
    }

    function launchInitialConfetti() {
        const colors = ['#fbbf24','#dc2626','#fff','#f59e0b','#fef3c7'];
        for (let i = 0; i < 30; i++) {
            setTimeout(() => {
                const c = document.createElement('div');
                c.className = 'confetti';
                c.style.left       = Math.random() * 100 + '%';
                c.style.top        = '-10px';
                c.style.background = colors[Math.floor(Math.random() * colors.length)];
                document.body.appendChild(c);
                setTimeout(() => c.remove(), 3000);
            }, i * 100);
        }
    }

    // â”€â”€â”€ DYNAMIC KEYFRAME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const s = document.createElement('style');
    s.textContent = `
        @keyframes explode {
            0%   { opacity:1; transform: translate(0,0) scale(1); }
            100% { opacity:0; transform: translate(var(--tx), var(--ty)) scale(0); }
        }`;
    document.head.appendChild(s);
</script>
</body>
</html>
